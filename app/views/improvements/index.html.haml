- provide(:title, @user.name)
.col-md-12
  .col-md-2
    .row
      %aside
        %section.user_info
          %h1
            = gravatar_for @user
            = @user.name
    %p
      %strong Name:
      = @user.name
    %p
      %strong Email:
      = @user.email
    %br/
    %form
      = form_tag improvements_path, :method => 'get' do
        - Status.all.each do |status|
          = check_box_tag "status[]", status.id
          = "#{status.name}"
        %p
          %br/
          = text_field_tag :search, params[:search]
          = submit_tag "Search", :title => nil,class: "btn btn-primary btn-go"
  .col-md-10
    %h1 All Tasks
    %table.table.table-bordered
      %col{:style => "width:100%"}
      %thead
        %tr
          %th= sortable "title", "Title"
          %th Category
          %th Content
          %th= sortable "user_id", "Created by"
          %th= sortable "user_id", "Responsible"
          %th= sortable "created_at", "Created At"
          %th= sortable "updated_at", "Updated At"
          %th= sortable "status_id", "Status"
          %th{:colspan => "3"}
      %tbody
        - @improvements.each do |improvement|
          %tr{:class => improvement.status.get_class}
            %td= improvement.title
            %td= improvement.category
            %td= improvement.content
            %td= improvement.name
            %td= improvement.responsible.name
            %td= improvement.created_at.to_datetime.strftime("%m/%d/%Y")
            %td= improvement.updated_at.to_datetime.strftime("%m/%d/%Y")
            %form
            %td
              = form_for improvement do |f|
                =f.select(:status_id, options_for_select([['Initialized',1],['In Progress',2],['Finished',3]], improvement.status.id))
                = f.submit "Update", :title => nil, class: "btn btn-primary btn-go btn-table"
            %td
              = link_to 'Show', improvement, class: "btn btn-primary btn-go btn-table"
              - if current_user.id == improvement.user_id || current_user.admin?
                = link_to 'Edit', edit_improvement_path(improvement), class: "btn btn-primary btn-go btn-table"
                = link_to 'Destroy', improvement, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-primary btn-go btn-table"
      = will_paginate @improvements
    %br/
    = link_to 'New Task', new_improvement_path, class: "btn btn-primary btn-go"